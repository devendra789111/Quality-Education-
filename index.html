<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UPSC Creator</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800 font-sans">
  <div class="max-w-6xl mx-auto p-4">
    <h1 class="text-5xl font-extrabold text-center text-indigo-600 mb-10">UPSC Creator</h1>

    <nav class="flex flex-wrap justify-center gap-4 mb-10">
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" onclick="showSection('home')">Home</button>
      <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded" onclick="showSection('notes')">Notes</button>
      <button class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded" onclick="showSection('tests')">Test Series</button>
      <button class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded" onclick="showSection('blogs')">Blog/News</button>
      <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="showSection('admin')">Admin Panel</button>
    </nav>

    <section id="home" class="section">
      <div class="bg-white p-8 rounded shadow text-center">Welcome to <strong>UPSC Creator</strong> — Your complete offline UPSC preparation tool.</div>
    </section>

    <section id="notes" class="section hidden"></section>
    <section id="tests" class="section hidden">
      <div id="testContainer"></div>
      <div id="leaderboard" class="mt-6 p-4 bg-white rounded shadow hidden">
        <h2 class="text-2xl font-bold mb-4 text-center">Test Summary</h2>
        <p id="summary" class="text-lg"></p>
      </div>
    </section>
    <section id="blogs" class="section hidden"></section>

    <section id="admin" class="section hidden">
      <div class="mb-4 text-center">
        <input type="password" id="adminPass" placeholder="Enter Admin Password" class="border rounded px-3 py-2 mr-2">
        <button class="bg-red-600 hover:bg-red-800 text-white px-4 py-2 rounded" onclick="verifyAdmin()">Login</button>
      </div>
      <div id="adminPanel" class="hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-lg font-semibold mb-2">Add Note</h3>
            <input type="text" id="noteTitle" placeholder="Title" class="border w-full px-3 py-2 mb-2">
            <input type="text" id="noteSubject" placeholder="Subject" class="border w-full px-3 py-2 mb-2">
            <input type="text" id="noteLink" placeholder="Link" class="border w-full px-3 py-2 mb-2">
            <button class="bg-green-600 hover:bg-green-800 text-white px-4 py-2 rounded w-full" onclick="addNote()">Add Note</button>
          </div>

          <div>
            <h3 class="text-lg font-semibold mb-2">Add Blog</h3>
            <input type="text" id="blogTitle" placeholder="Title" class="border w-full px-3 py-2 mb-2">
            <textarea id="blogContent" placeholder="Content" class="border w-full px-3 py-2 mb-2"></textarea>
            <button class="bg-yellow-600 hover:bg-yellow-800 text-white px-4 py-2 rounded w-full" onclick="addBlog()">Add Blog</button>
          </div>

          <div class="md:col-span-2">
            <h3 class="text-lg font-semibold mb-2">Add Test Question</h3>
            <input type="text" id="qTitle" placeholder="Question" class="border w-full px-3 py-2 mb-2">
            <input type="text" id="opt1" placeholder="Option 1" class="border w-full px-3 py-2 mb-2">
            <input type="text" id="opt2" placeholder="Option 2" class="border w-full px-3 py-2 mb-2">
            <input type="text" id="opt3" placeholder="Option 3" class="border w-full px-3 py-2 mb-2">
            <input type="text" id="opt4" placeholder="Option 4" class="border w-full px-3 py-2 mb-2">
            <input type="number" id="correctAns" placeholder="Correct Option (0-3)" class="border w-full px-3 py-2 mb-2">
            <button class="bg-purple-600 hover:bg-purple-800 text-white px-4 py-2 rounded w-full" onclick="addQuestion()">Add Question</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    const notes = JSON.parse(localStorage.getItem('notes') || '[{"title":"Indian Polity - Basics","subject":"Polity","link":"https://example.com/polity-basics.pdf"}]');
    const blogs = JSON.parse(localStorage.getItem('blogs') || '[{"title":"UPSC 2025 Latest Update","content":"UPSC 2025 exam notification released! Check your eligibility and syllabus now."}]');
    const tests = JSON.parse(localStorage.getItem('tests') || '[{"q":"Who is the father of Indian Constitution?","options":["Mahatma Gandhi","B.R. Ambedkar","Jawaharlal Nehru","Subhash Chandra Bose"],"answer":1}]');
    let userAnswers = [];
    let testStartTime;

    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
      if (id === 'notes') renderNotes();
      if (id === 'blogs') renderBlogs();
      if (id === 'tests') {
        renderTests();
        testStartTime = new Date();
      }
    }

    function renderNotes() {
      const div = document.getElementById('notes');
      div.innerHTML = notes.map(n => `
        <div class='bg-white p-6 shadow rounded mb-6'>
          <strong>${n.title}</strong> — ${n.subject} <br><a href='${n.link}' class='text-blue-500 underline' download>Download Note</a>
        </div>`).join('');
    }

    function renderBlogs() {
      const div = document.getElementById('blogs');
      div.innerHTML = blogs.map(b => `
        <div class='bg-white p-6 shadow rounded mb-6'>
          <strong>${b.title}</strong>
          <p>${b.content}</p>
        </div>`).join('');
    }

    function renderTests() {
      const div = document.getElementById('testContainer');
      userAnswers = new Array(tests.length).fill(null);
      div.innerHTML = tests.map((t, i) => `
        <div class='bg-white p-6 shadow rounded mb-6'>
          <p><strong>${t.q}</strong></p>
          ${t.options.map((o, idx) => `<label class='block mt-2'><input type='radio' name='q${i}' onclick='selectAnswer(${i}, ${idx})'> ${o}</label>`).join('')}
        </div>`).join('') + `
        <div class='text-center'><button class='bg-indigo-600 hover:bg-indigo-800 text-white px-6 py-3 rounded mt-6' onclick='showResult()'>Submit Test</button></div>`;
    }

    function selectAnswer(qIdx, selected) {
      userAnswers[qIdx] = selected;
    }

    function showResult() {
      let correct = 0, incorrect = 0;
      userAnswers.forEach((ans, i) => {
        if (ans === tests[i].answer) correct++;
        else if (ans !== null) incorrect++;
      });
      const timeTaken = Math.floor((new Date() - testStartTime) / 1000);
      const score = correct - (incorrect * (1 / 3));
      const summary = `Total Questions: ${tests.length}, Correct: ${correct}, Incorrect: ${incorrect}, Score (with -1/3 marking): ${score.toFixed(2)}, Time Taken: ${timeTaken} sec`;
      document.getElementById('leaderboard').classList.remove('hidden');
      document.getElementById('summary').innerText = summary;
    }

    function verifyAdmin() {
      const pass = document.getElementById('adminPass').value;
      if (pass === '1234') {
        document.getElementById('adminPanel').classList.remove('hidden');
      } else {
        alert('Wrong password');
      }
    }

    function addNote() {
      notes.push({ title: noteTitle.value, subject: noteSubject.value, link: noteLink.value });
      localStorage.setItem('notes', JSON.stringify(notes));
      noteTitle.value = noteSubject.value = noteLink.value = '';
      alert('Note Added');
    }

    function addBlog() {
      blogs.push({ title: blogTitle.value, content: blogContent.value });
      localStorage.setItem('blogs', JSON.stringify(blogs));
      blogTitle.value = blogContent.value = '';
      alert('Blog Added');
    }

    function addQuestion() {
      tests.push({ q: qTitle.value, options: [opt1.value, opt2.value, opt3.value, opt4.value], answer: Number(correctAns.value) });
      localStorage.setItem('tests', JSON.stringify(tests));
      qTitle.value = opt1.value = opt2.value = opt3.value = opt4.value = correctAns.value = '';
      alert('Question Added');
    }

    showSection('home');
  </script>
</body>
</html>
